(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["play"],{"159b":function(t,s,n){var i=n("da84"),a=n("fdbc"),e=n("17c2"),r=n("9112");for(var o in a){var c=i[o],l=c&&c.prototype;if(l&&l.forEach!==e)try{r(l,"forEach",e)}catch(u){l.forEach=e}}},"17c2":function(t,s,n){"use strict";var i=n("b727").forEach,a=n("a640"),e=n("ae40"),r=a("forEach"),o=e("forEach");t.exports=r&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},"281c":function(t,s,n){"use strict";var i=n("58c8"),a=n.n(i);a.a},"2ba8":function(t,s,n){"use strict";var i=n("7e0f"),a=n.n(i);a.a},"37aa":function(t,s,n){},4160:function(t,s,n){"use strict";var i=n("23e7"),a=n("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"577f":function(t,s,n){"use strict";var i=n("37aa"),a=n.n(i);a.a},5899:function(t,s){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,s,n){var i=n("1d80"),a=n("5899"),e="["+a+"]",r=RegExp("^"+e+e+"*"),o=RegExp(e+e+"*$"),c=function(t){return function(s){var n=String(i(s));return 1&t&&(n=n.replace(r,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},"58c8":function(t,s,n){},"5c94":function(t,s,n){"use strict";var i=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"root"},[n("table",{staticClass:"table"},[t._m(0),t._l(this.tournoi.participants,(function(s,i){return n("tr",{key:s._id,attrs:{item:s,index:i}},[n("td",{staticClass:"cell"},[n("img",{staticClass:"image",attrs:{src:s.image}})]),n("td",{staticClass:"cell"},[t._v(t._s((s.stats.winCount/t.tournoi.totalPlayed*100).toFixed(1))+"% ("+t._s(s.stats.winCount)+"/"+t._s(t.tournoi.totalPlayed)+")")]),n("td",{staticClass:"cell"},[t._v(t._s((s.stats.finalCount/t.tournoi.totalPlayed*100).toFixed(1))+"% ("+t._s(s.stats.finalCount)+"/"+t._s(t.tournoi.totalPlayed)+")")]),n("td",{staticClass:"cell"},[t._v(t._s((s.stats.semiCount/t.tournoi.totalPlayed*100).toFixed(1))+"% ("+t._s(s.stats.semiCount)+"/"+t._s(t.tournoi.totalPlayed)+")")]),n("td",{staticClass:"cell"},[t._v(t._s((s.stats.quarterCount/t.tournoi.totalPlayed*100).toFixed(1))+"% ("+t._s(s.stats.quarterCount)+"/"+t._s(t.tournoi.totalPlayed)+")")])])}))],2)])},a=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("tr",[n("th",{staticClass:"column-title"}),n("th",{staticClass:"column-title"},[t._v("Win")]),n("th",{staticClass:"column-title"},[t._v("Final")]),n("th",{staticClass:"column-title"},[t._v("Semi")]),n("th",{staticClass:"column-title"},[t._v("Quarter")])])}],e={name:"StatsComponent",data:function(){return{tournoi:this.props_tournoi}},props:{props_tournoi:Object},methods:{getReste:function(t){var s=t.stats;return this.tournoi.totalPlayed-s.winCount-s.finalCount-s.semiCount-s.quarterCount}}},r=e,o=(n("577f"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"1cbe6848",null);s["a"]=c.exports},6096:function(t,s,n){"use strict";n.r(s);var i=function(){var t=this,s=t.$createElement,n=t._self._c||s;return t.loadingReady?n("div",{staticClass:"PlayView"},[t.display_PrePlayComponent?n("PrePlayComponent",{attrs:{props_tournoi:this.tournoi},on:{next:t.toPlay}}):t._e(),t.display_PlayComponent?n("PlayComponent",{attrs:{props_tournoi:this.tournoi},on:{next:t.toPostPlay}}):t._e(),t.display_PostPlayComponent?n("PostPlayComponent",{attrs:{props_tournoi:this.tournoi,props_winner:this.winner}}):t._e()],1):t._e()},a=[],e=(n("96cf"),n("1da1")),r=n("0dcd"),o=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"root"},[n("div",{staticClass:"images"},[n("img",{attrs:{src:t.tournoi.participants[0].image}}),n("img",{attrs:{src:t.tournoi.participants[1].image}})]),n("div",{staticClass:"right"},[n("div",{staticClass:"infos"},[n("h2",{staticClass:"title"},[t._v(t._s(t.tournoi.title))]),n("h3",{staticClass:"author"},[t._v(t._s(t.tournoi.author))]),n("div",{staticClass:"numbers"},[n("p",{staticClass:"likes"},[t._v("⭐ "+t._s(t.tournoi.likes))]),n("p",{staticClass:"played"},[t._v("▶ "+t._s(t.tournoi.totalPlayed))])]),n("div",{staticClass:"description"},[t._v("is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries")])]),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn-play",on:{click:function(s){return t.$emit("next",!1)}}},[t._v("Play")]),n("button",{staticClass:"btn-stats",on:{click:function(s){return t.toStats()}}},[t._v("Stats")])])])])},c=[],l=n("a18c"),u={name:"PrePlayComponent",data:function(){return{tournoi:this.props_tournoi}},props:{props_tournoi:Object},methods:{toStats:function(){l["a"].push({name:"StatsView",params:{id:this.tournoi._id,props_tournoi:this.tournoi}})}}},p=u,h=(n("2ba8"),n("2877")),d=Object(h["a"])(p,o,c,!1,null,"28fe3070",null),f=d.exports,_=function(){var t=this,s=t.$createElement,n=t._self._c||s;return this.tournoi?n("div",{staticClass:"root"},[n("h2",{staticClass:"title"},[t._v(t._s(t.headerText)+t._s(t.progression))]),n("div",{staticClass:"images"},[n("img",{attrs:{src:t.participants[t.currentMatch].image},on:{click:function(s){return t.nextMatch(0)}}}),n("img",{attrs:{src:t.participants[t.currentMatch+1].image},on:{click:function(s){return t.nextMatch(1)}}})])]):t._e()},m=[],v=(n("4160"),n("a9e3"),n("b64b"),n("159b"),n("6b75"));function b(t){if(Array.isArray(t))return Object(v["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function y(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var C=n("06c5");function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t){return b(t)||y(t)||Object(C["a"])(t)||P()}var k={name:"PlayComponent",data:function(){return{tournoi:this.props_tournoi,participants:[],nextParticipants:[],numPhases:Number,currentPhase:Number,currentMatch:0,winner:{}}},props:{props_tournoi:Object},created:function(){this.participants=this.shuffle(this.tournoi.participants),this.numPhases=this.getPhases(),this.currentPhase=this.numPhases},computed:{headerText:function(){return console.log("oui"),1==this.currentPhase?"Finals":2==this.currentPhase?"Semifinals":3==this.currentPhase?"Quarterfinals":"Qualifiers"},progression:function(){return 1===this.currentPhase?"":" - "+Math.ceil((this.currentMatch+1)/2)+"/"+this.participants.length/2}},methods:{startTournoi:function(){this.PrePlayReady=!1,this.PlayReady=!0},finishTournoi:function(t){this.participants[this.currentMatch+t].stats.winCount++,this.tournoi.totalPlayed++,this.$emit("next",this.tournoi,this.participants[t])},nextMatch:function(t){this.writeStat(t),1==this.currentPhase&&this.finishTournoi(t),this.nextParticipants.push(this.participants[this.currentMatch+t]),this.currentMatch<Object.keys(this.participants).length-2?this.currentMatch=this.currentMatch+2:this.nextPhase()},nextPhase:function(){this.currentMatch=0,this.participants=[],this.participants=g(this.nextParticipants),this.nextParticipants=[],this.currentPhase--},getPhases:function(){var t=this.tournoi.size,s=0;while(t>1)t/=2,s++;return s},writeStat:function(t){var s=null;switch(t){case 0:s=this.participants[this.currentMatch+1];break;case 1:s=this.participants[this.currentMatch];break}switch(this.currentPhase){case 1:s.stats.finalCount++;break;case 2:s.stats.semiCount++;break;case 3:s.stats.quarterCount++;break}},shuffle:function(t){var s=[];Object.keys(t).forEach((function(n){s.push(t[n])}));for(var n=s.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),a=[s[i],s[n]];s[n]=a[0],s[i]=a[1]}return console.log(s),s}}},w=k,x=(n("281c"),Object(h["a"])(w,_,m,!1,null,"663091a9",null)),E=x.exports,M=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"root"},[i("div",{staticClass:"postplay"},[i("h2",{staticClass:"title"},[t._v(t._s(t.tournoi.title))]),i("div",{staticClass:"main"},[i("img",{staticClass:"image",attrs:{src:this.winner.image}}),t.isMobile?i("div",{staticClass:"infos-mobile"},[i("img",{staticClass:"trophy",attrs:{src:n("5b1c")}}),i("div",{staticClass:"numbers"},[i("div",{staticClass:"likes"},[t._v("⭐ "+t._s(t.tournoi.likes))]),i("div",{staticClass:"played"},[t._v("▶ 4546512")])]),i("button",{staticClass:"btn-like",class:t.like_css_class,attrs:{disabled:t.like_disabled},on:{click:t.likes}},[t._v("Like")]),i("button",{staticClass:"btn-stats",on:{click:t.displayStats}},[t._v("Stats")])]):t._e(),t.isMobile?t._e():i("div",{staticClass:"infos-desktop"},[i("div",{staticClass:"winner"},[i("img",{staticClass:"trophy",attrs:{src:n("5b1c")}}),i("div",{staticClass:"text"},[t._v("Winner !")])]),i("div",{staticClass:"likes"},[t._v(t._s(t.tournoi.likes)+" ⭐")]),i("div",{staticClass:"played"},[t._v("▶ 4546512")]),i("button",{staticClass:"btn-like",class:t.like_css_class,attrs:{disabled:t.like_disabled},on:{click:t.likes}},[t._v("Like")]),i("button",{staticClass:"btn-stats",on:{click:t.displayStats}},[t._v("Stats")])])]),i("img",{staticClass:"arrow",attrs:{src:n("d4d9")},on:{click:t.displayStats}})]),i("StatsComponent",{ref:"stats",attrs:{id:"stats",props_tournoi:this.tournoi}})],1)},S=[],I=n("5c94"),N={name:"PostPlayComponent",components:{StatsComponent:I["a"]},data:function(){return{isMobile:!1,tournoi:this.props_tournoi,winner:this.props_winner,like_disabled:!1,like_css_class:"like-enabled"}},props:{props_winner:Object,props_tournoi:Object},created:function(){this.handleView(),window.addEventListener("resize",this.handleView)},methods:{handleView:function(){this.isMobile=window.innerWidth<600},likes:function(){var t=this;return Object(e["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,r["a"].likeTournoi(t.tournoi._id);case 2:t.tournoi=s.sent,t.like_disabled=!0,t.like_css_class="like-disabled";case 5:case"end":return s.stop()}}),s)})))()},displayStats:function(){var t=this.$refs.stats.$el;t.scrollIntoView({behavior:"smooth"})}}},O=N,j=(n("f5f9"),Object(h["a"])(O,M,S,!1,null,"21976c41",null)),A=j.exports,T={name:"PlayView",components:{PrePlayComponent:f,PlayComponent:E,PostPlayComponent:A},data:function(){return{tournoi:this.props_tournoi,loadingReady:!1,display_PrePlayComponent:!0,display_PlayComponent:!1,display_PostPlayComponent:!1,winner:{}}},created:function(){var t=this;return Object(e["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,console.log("created"),s.next=4,r["a"].getTournoi(t.$route.params.id);case 4:t.tournoi=s.sent,t.loadingReady=!0,s.next=12;break;case 8:s.prev=8,s.t0=s["catch"](0),console.log(s.t0.response),t.$router.push("/");case 12:case"end":return s.stop()}}),s,null,[[0,8]])})))()},methods:{toPlay:function(){this.display_PrePlayComponent=!1,this.display_PlayComponent=!0},toPostPlay:function(t,s){this.tournoi=t,this.display_PlayComponent=!1,this.display_PostPlayComponent=!0,this.winner=s,r["a"].updateTournoi(this.tournoi)}}},R=T,$=Object(h["a"])(R,i,a,!1,null,null,null);s["default"]=$.exports},7156:function(t,s,n){var i=n("861d"),a=n("d2bb");t.exports=function(t,s,n){var e,r;return a&&"function"==typeof(e=s.constructor)&&e!==n&&i(r=e.prototype)&&r!==n.prototype&&a(t,r),t}},"7e0f":function(t,s,n){},a440:function(t,s,n){},a640:function(t,s,n){"use strict";var i=n("d039");t.exports=function(t,s){var n=[][t];return!!n&&i((function(){n.call(null,s||function(){throw 1},1)}))}},a9e3:function(t,s,n){"use strict";var i=n("83ab"),a=n("da84"),e=n("94ca"),r=n("6eeb"),o=n("5135"),c=n("c6b6"),l=n("7156"),u=n("c04e"),p=n("d039"),h=n("7c73"),d=n("241c").f,f=n("06cf").f,_=n("9bf2").f,m=n("58a8").trim,v="Number",b=a[v],y=b.prototype,C=c(h(y))==v,P=function(t){var s,n,i,a,e,r,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=m(l),s=l.charCodeAt(0),43===s||45===s){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===s){switch(l.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(e=l.slice(2),r=e.length,o=0;o<r;o++)if(c=e.charCodeAt(o),c<48||c>a)return NaN;return parseInt(e,i)}return+l};if(e(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var g,k=function(t){var s=arguments.length<1?0:t,n=this;return n instanceof k&&(C?p((function(){y.valueOf.call(n)})):c(n)!=v)?l(new b(P(s)),n,k):P(s)},w=i?d(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)o(b,g=w[x])&&!o(k,g)&&_(k,g,f(b,g));k.prototype=y,y.constructor=k,r(a,v,k)}},b64b:function(t,s,n){var i=n("23e7"),a=n("7b0b"),e=n("df75"),r=n("d039"),o=r((function(){e(1)}));i({target:"Object",stat:!0,forced:o},{keys:function(t){return e(a(t))}})},f5f9:function(t,s,n){"use strict";var i=n("a440"),a=n.n(i);a.a}}]);
//# sourceMappingURL=play.1801ebe8.js.map